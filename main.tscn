[gd_scene load_steps=37 format=3 uid="uid://bblla2fup6lge"]

[ext_resource type="Script" uid="uid://bbb02olkeg8w7" path="res://script/Wa2EngineMain.cs" id="1_wdeo5"]
[ext_resource type="Script" uid="uid://bo8ltnuy2cw5j" path="res://script/Wa2SoundMgr.cs" id="2_w3y5b"]
[ext_resource type="Script" uid="uid://i2txg74b6v3t" path="res://script/AnimatorMgr.cs" id="2_ycdy4"]
[ext_resource type="Script" uid="uid://7o38nrw6moms" path="res://script/Wa2Viewport.cs" id="3_0aff7"]
[ext_resource type="PackedScene" uid="uid://8iltc13k4sm1" path="res://scene/AdvMain.tscn" id="3_ww1q6"]
[ext_resource type="Script" uid="uid://bevuj2vq1wbno" path="res://script/SubtitleMgr.cs" id="4_074og"]
[ext_resource type="Script" uid="uid://ch3fjcpjwskoj" path="res://script/Wa2Image.cs" id="4_jqvt3"]
[ext_resource type="Script" uid="uid://bplbwgh74r3w5" path="res://script/Wa2UiMgr.cs" id="4_p6nqb"]
[ext_resource type="Shader" uid="uid://dd4pkmct7k0u4" path="res://shader/mask.gdshader" id="5_3be8l"]
[ext_resource type="PackedScene" uid="uid://b6u3qm7g3fnoj" path="res://scene/title_menu.tscn" id="5_d5jo3"]
[ext_resource type="PackedScene" uid="uid://ikxlgfxd3sa7" path="res://scene/LoadSaveMenu.tscn" id="9_kek77"]
[ext_resource type="Script" uid="uid://bh0600rsr4o0e" path="res://script/wa2_video.gd" id="10_4c57u"]
[ext_resource type="PackedScene" uid="uid://djqgqhlm8ewbt" path="res://scene/CGModeMenu.tscn" id="10_efxa6"]
[ext_resource type="PackedScene" uid="uid://kthxdrmqdyyc" path="res://scene/BgmModeMenu.tscn" id="11_dg77c"]
[ext_resource type="PackedScene" uid="uid://85d6c6lepals" path="res://scene/BackLog.tscn" id="13_w48qg"]
[ext_resource type="PackedScene" uid="uid://du2ied53oeq1x" path="res://scene/OptionsMenu.tscn" id="14_vivmo"]
[ext_resource type="PackedScene" uid="uid://b8606yyc0k403" path="res://scene/UIConfirm.tscn" id="15_2cqfq"]
[ext_resource type="PackedScene" uid="uid://d4mbvpx3le3ye" path="res://scene/Calender.tscn" id="17_cegan"]
[ext_resource type="PackedScene" uid="uid://dh1x6736ft2sb" path="res://scene/NovelBackLogMenu.tscn" id="18_82xsv"]
[ext_resource type="FontFile" uid="uid://bqnr5jmcejvam" path="res://assets/fonts/fzzyjt.ttf" id="18_cegan"]
[ext_resource type="PackedScene" uid="uid://rteyiik8w6ct" path="res://scene/SceneReplayMenu.tscn" id="19_getpj"]
[ext_resource type="PackedScene" uid="uid://b7lnyub20p6ad" path="res://scene/VoiceMessage.tscn" id="20_ryguw"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_tw2vm"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = false

[sub_resource type="ShaderMaterial" id="ShaderMaterial_c887e"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lekix"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rx1yr"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_m30m8"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xteud"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0t8w5"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0havl"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8cquq"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hdu5d"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8skep"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ogly6"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_536a2"]
resource_local_to_scene = true
shader = ExtResource("5_3be8l")
shader_parameter/cur_scale = Vector2(1, 1)
shader_parameter/cur_offset = Vector2(0, 0)
shader_parameter/next_scale = Vector2(1, 1)
shader_parameter/next_offset = Vector2(0, 0)
shader_parameter/blend = 0.0
shader_parameter/fead_weight = 1.0
shader_parameter/canvas_size = Vector2(1280, 720)
shader_parameter/center = false

[sub_resource type="LabelSettings" id="LabelSettings_82xsv"]
font = ExtResource("18_cegan")
font_size = 24
outline_size = 4
outline_color = Color(0, 0, 0, 1)
shadow_size = 0

[node name="EngineMain" type="Control" node_paths=PackedStringArray("BmpContainer", "AnimatorMgr", "SubtitleMgr", "VideoPlayer", "CharGroup", "SubViewport", "Viewport", "AdvMain", "UiMgr", "SoundMgr", "BgTexture", "MaskTexture")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_wdeo5")
BmpContainer = NodePath("SubViewportContainer/SubViewport/BmpContainer")
AnimatorMgr = NodePath("AnimatorMgr")
SubtitleMgr = NodePath("SubtitleMgr")
VideoPlayer = NodePath("VideoStreamPlayer")
CharGroup = NodePath("SubViewportContainer/SubViewport/CharGroup")
SubViewport = NodePath("SubViewportContainer")
Viewport = NodePath("SubViewportContainer/SubViewport")
AdvMain = NodePath("Wa2UiMgr/AdvMain")
UiMgr = NodePath("Wa2UiMgr")
SoundMgr = NodePath("SoundMgr")
BgTexture = NodePath("SubViewportContainer/SubViewport/Bg")
MaskTexture = NodePath("MaskImage")

[node name="AnimatorMgr" type="Node" parent="."]
script = ExtResource("2_ycdy4")
metadata/_custom_type_script = "uid://i2txg74b6v3t"

[node name="SoundMgr" type="Node" parent="."]
script = ExtResource("2_w3y5b")

[node name="SubtitleMgr" type="Node" parent="." node_paths=PackedStringArray("TextLabel")]
script = ExtResource("4_074og")
TextLabel = NodePath("../Label")

[node name="SubViewportContainer" type="SubViewportContainer" parent="." node_paths=PackedStringArray("BgTexure", "CharGroup", "RenderTexture")]
custom_minimum_size = Vector2(1280, 720)
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("3_0aff7")
BgTexure = NodePath("SubViewport/Bg")
CharGroup = NodePath("SubViewport/CharGroup")
RenderTexture = NodePath("../MaskImage")

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(1280, 720)
render_target_update_mode = 4

[node name="Bg" type="ColorRect" parent="SubViewportContainer/SubViewport"]
material = SubResource("ShaderMaterial_tw2vm")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")
metadata/_custom_type_script = "uid://ch3fjcpjwskoj"

[node name="CharGroup" type="Control" parent="SubViewportContainer/SubViewport"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_c887e")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect2" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_lekix")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect3" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_rx1yr")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect4" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_m30m8")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect5" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_xteud")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect6" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_0t8w5")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect7" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_0havl")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect8" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_8cquq")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect9" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_hdu5d")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect10" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_8skep")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="ColorRect11" type="ColorRect" parent="SubViewportContainer/SubViewport/CharGroup"]
material = SubResource("ShaderMaterial_ogly6")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_jqvt3")

[node name="BmpContainer" type="Control" parent="SubViewportContainer/SubViewport"]
z_index = 999
layout_mode = 3
anchors_preset = 0

[node name="MaskImage" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_536a2")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("4_jqvt3")

[node name="Wa2UiMgr" type="Control" parent="." node_paths=PackedStringArray("UICalender", "UIConfirm", "OptionsMenu", "BgmModeMenu", "AdvMain", "TitleMenu", "LoadSaveMenu", "CGModeMenu", "BackLogMenu", "NovelBackLogMenu", "SceneReplayMenu", "VoiceMessageMenu")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("4_p6nqb")
UICalender = NodePath("Calender")
UIConfirm = NodePath("UIConfirm")
OptionsMenu = NodePath("OptionsMenu")
BgmModeMenu = NodePath("BgmModeMenu")
AdvMain = NodePath("AdvMain")
TitleMenu = NodePath("TitleMenu")
LoadSaveMenu = NodePath("LoadSaveMenu")
CGModeMenu = NodePath("CGModeMenu")
BackLogMenu = NodePath("BackLogMenu")
NovelBackLogMenu = NodePath("NovelBackLogMenu")
SceneReplayMenu = NodePath("SceneReplayMenu")
VoiceMessageMenu = NodePath("VoiceMessage")

[node name="TitleMenu" parent="Wa2UiMgr" instance=ExtResource("5_d5jo3")]
visible = false
layout_mode = 1

[node name="AdvMain" parent="Wa2UiMgr" instance=ExtResource("3_ww1q6")]
visible = false
layout_mode = 1
mouse_filter = 2

[node name="LoadSaveMenu2" parent="Wa2UiMgr" instance=ExtResource("9_kek77")]
layout_mode = 1

[node name="LoadSaveMenu" parent="Wa2UiMgr" instance=ExtResource("9_kek77")]
layout_mode = 1

[node name="CGModeMenu" parent="Wa2UiMgr" instance=ExtResource("10_efxa6")]
layout_mode = 1

[node name="BgmModeMenu" parent="Wa2UiMgr" instance=ExtResource("11_dg77c")]
layout_mode = 1

[node name="BackLogMenu" parent="Wa2UiMgr" instance=ExtResource("13_w48qg")]
layout_mode = 1

[node name="OptionsMenu" parent="Wa2UiMgr" instance=ExtResource("14_vivmo")]
layout_mode = 1

[node name="UIConfirm" parent="Wa2UiMgr" instance=ExtResource("15_2cqfq")]
visible = false
layout_mode = 1

[node name="Calender" parent="Wa2UiMgr" instance=ExtResource("17_cegan")]
layout_mode = 1

[node name="NovelBackLogMenu" parent="Wa2UiMgr" instance=ExtResource("18_82xsv")]
layout_mode = 1

[node name="SceneReplayMenu" parent="Wa2UiMgr" instance=ExtResource("19_getpj")]
layout_mode = 1

[node name="VoiceMessage" parent="Wa2UiMgr" instance=ExtResource("20_ryguw")]
layout_mode = 1

[node name="VideoStreamPlayer" type="VideoStreamPlayer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
expand = true
script = ExtResource("10_4c57u")

[node name="Label" type="Label" parent="."]
custom_minimum_size = Vector2(640, 24)
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = 40.0
offset_bottom = 77.0
grow_horizontal = 2
label_settings = SubResource("LabelSettings_82xsv")
horizontal_alignment = 1
